// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏
// express - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
const express = require('express');
// logger - –Ω–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
const logger = require('./logger');

// –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Express
const app = express();
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ä—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ process.env.PORT, –∏–Ω–∞—á–µ 3012)
const port = process.env.PORT || 3012;

// –ü–æ–¥–∫–ª—é—á–∞–µ–º middleware logger
// app.use() - –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è middleware
// –≠—Ç–æ—Ç logger –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –í–°–ï–• –º–∞—Ä—à—Ä—É—Ç–æ–≤
app.use(logger);

// –ú–∞—Ä—à—Ä—É—Ç –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã ('/')
// app.get() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ GET-–∑–∞–ø—Ä–æ—Å–æ–≤
// –ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä - –ø—É—Ç—å
// –í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä - —Ñ—É–Ω–∫—Ü–∏—è-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (req, res) => {}
app.get('/', (req, res) => {
    // –í—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
    console.log("home");
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É
    res.send('Home');
});

// –ú–∞—Ä—à—Ä—É—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã about ('/about')
app.get('/about', (req, res) => {
    console.log("About");
    res.send('About');
});

// –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É
// app.listen() –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
app.listen(port, () => {
    console.log(`
    üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:${port}
    
    –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
    1. –ì–ª–∞–≤–Ω–∞—è:  http://localhost:${port}/
    2. –û –Ω–∞—Å:    http://localhost:${port}/about
    
    üí° Logger middleware –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏:
       - –ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ (GET, POST –∏ —Ç.–¥.)
       - URL –∑–∞–ø—Ä–æ—Å–∞
       - –ì–æ–¥ –∑–∞–ø—Ä–æ—Å–∞
    `);
});

/*
–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:

1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   - –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π (express –∏ logger)
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ middleware
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

2. –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã Express:
   - express() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - app.use() - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ middleware
   - app.get() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ GET –∑–∞–ø—Ä–æ—Å–æ–≤
   - app.listen() - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

3. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:
   - '/'      ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'Home'
   - '/about' ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 'About'
   –ö–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç:
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ middleware
   - –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É

4. Middleware:
   - –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞
   - –õ–æ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ
   - –ü–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–ª—å—à–µ —á–µ—Ä–µ–∑ next()

5. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (try-catch)
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä –¥–ª—è HTML
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (css, js)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å POST –∑–∞–ø—Ä–æ—Å—ã
*/